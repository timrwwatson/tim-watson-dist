<!DOCTYPE html><html lang="en" class="scroll-smooth"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="canonical" href="https://tim-watson.com/posts/Creating-a-program-to-predict-the-lottery/"><meta name="generator" content="Astro v4.2.4"><!-- General Meta Tags --><title>Predicting the Lottery</title><meta name="title" content="Predicting the Lottery"><meta name="description" content="My starting look into an impossible task, predicting the lottery"><meta name="author" content="Tim Watson"><link rel="sitemap" href="/sitemap-index.xml"><!-- Open Graph / Facebook --><meta property="og:title" content="Predicting the Lottery"><meta property="og:description" content="My starting look into an impossible task, predicting the lottery"><meta property="og:url" content="https://tim-watson.com/posts/Creating-a-program-to-predict-the-lottery/"><meta property="og:image" content="https://tim-watson.com/"><!-- Article Published/Modified time --><meta property="article:published_time" content="2022-02-06T20:00:35.000Z"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://tim-watson.com/posts/Creating-a-program-to-predict-the-lottery/"><meta property="twitter:title" content="Predicting the Lottery"><meta property="twitter:description" content="My starting look into an impossible task, predicting the lottery"><meta property="twitter:image" content="https://tim-watson.com/"><!-- Google Font --><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,400;0,500;0,600;0,700;1,400;1,600&display=swap" rel="stylesheet"><meta name="theme-color" content=""><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><script src="/toggle-theme.js"></script><style>.breadcrumb:where(.astro-ilhxcym7){margin-left:auto;margin-right:auto;margin-bottom:.25rem;margin-top:2rem;width:100%;max-width:80rem;padding-left:1rem;padding-right:1rem}.breadcrumb:where(.astro-ilhxcym7) ul:where(.astro-ilhxcym7){display:flex;-moz-column-gap:.5rem;column-gap:.5rem}.breadcrumb:where(.astro-ilhxcym7) ul:where(.astro-ilhxcym7) li:where(.astro-ilhxcym7){display:flex;-moz-column-gap:.5rem;column-gap:.5rem;text-transform:capitalize;opacity:.7}.breadcrumb:where(.astro-ilhxcym7) ul:where(.astro-ilhxcym7) li:where(.astro-ilhxcym7):not(:last-child):hover{opacity:1}
#main-content:where(.astro-hsp6otuf){margin-left:auto;margin-right:auto;width:100%;max-width:80rem;padding-left:1rem;padding-right:1rem;padding-bottom:1rem}#main-content:where(.astro-hsp6otuf) h1:where(.astro-hsp6otuf){font-size:1.5rem;line-height:2rem;font-weight:600}@media (min-width: 640px){#main-content:where(.astro-hsp6otuf) h1:where(.astro-hsp6otuf){font-size:1.875rem;line-height:2.25rem}}#main-content:where(.astro-hsp6otuf) p:where(.astro-hsp6otuf){margin-bottom:1.5rem;margin-top:.5rem;font-style:italic}
</style>
<link rel="stylesheet" href="/_astro/about.aXFmXLlA.css" />
<style>a:where(.astro-blwjyjpt){position:relative;text-decoration-line:underline;text-decoration-style:dashed}a:where(.astro-blwjyjpt):hover{top:-.125rem;--tw-text-opacity: 1;color:rgba(var(--color-accent),var(--tw-text-opacity))}a:where(.astro-blwjyjpt):focus-visible{padding:.25rem}a:where(.astro-blwjyjpt) svg:where(.astro-blwjyjpt){margin-right:-1rem;height:1.25rem;width:1.25rem;--tw-scale-x: .75;--tw-scale-y: .75;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));--tw-text-opacity: 1;color:rgba(var(--color-text-base),var(--tw-text-opacity));opacity:.7}.group:where(.astro-blwjyjpt):hover a:where(.astro-blwjyjpt) svg:where(.astro-blwjyjpt){fill:rgb(var(--color-accent))}
.pagination-wrapper:where(.astro-d776pwuy){margin-bottom:2rem;margin-top:auto;display:flex;justify-content:center}.disabled:where(.astro-d776pwuy){pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;opacity:.5}.disabled:where(.astro-d776pwuy):hover{--tw-text-opacity: 1;color:rgba(var(--color-text-base),var(--tw-text-opacity))}.group:where(.astro-d776pwuy):hover .disabled:where(.astro-d776pwuy){fill:rgb(var(--color-text-base))}.group:where(.astro-d776pwuy):hover .disabled-svg:where(.astro-d776pwuy){fill:rgb(var(--color-text-base))!important}
@keyframes astroFadeInOut{0%{opacity:1}to{opacity:0}}@keyframes astroFadeIn{0%{opacity:0}}@keyframes astroFadeOut{to{opacity:0}}@keyframes astroSlideFromRight{0%{transform:translate(100%)}}@keyframes astroSlideFromLeft{0%{transform:translate(-100%)}}@keyframes astroSlideToRight{to{transform:translate(100%)}}@keyframes astroSlideToLeft{to{transform:translate(-100%)}}@media (prefers-reduced-motion){::view-transition-group(*),::view-transition-old(*),::view-transition-new(*){animation:none!important}[data-astro-transition-scope]{animation:none!important}}
main:where(.astro-vj4tpspi){margin-left:auto;margin-right:auto;width:100%;max-width:80rem;padding-left:1rem;padding-right:1rem;padding-bottom:3rem}.post-title:where(.astro-vj4tpspi){font-size:1.5rem;line-height:2rem;font-weight:600;--tw-text-opacity: 1;color:rgba(var(--color-accent),var(--tw-text-opacity))}
</style><script type="module" src="/_astro/hoisted.o4LUDjyO.js"></script><style>[data-astro-transition-scope="astro-plk3gbjq-1"] { view-transition-name: predicting-the-lottery; }@layer astro { ::view-transition-old(predicting-the-lottery) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }::view-transition-new(predicting-the-lottery) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back]::view-transition-old(predicting-the-lottery) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back]::view-transition-new(predicting-the-lottery) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-plk3gbjq-1"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-plk3gbjq-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-plk3gbjq-1"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-plk3gbjq-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-plk3gbjq-1"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-plk3gbjq-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-plk3gbjq-1"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-plk3gbjq-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }</style><style>[data-astro-transition-scope="astro-36ssibgs-2"] { view-transition-name: lottery; }@layer astro { ::view-transition-old(lottery) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }::view-transition-new(lottery) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back]::view-transition-old(lottery) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back]::view-transition-new(lottery) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-36ssibgs-2"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-36ssibgs-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-36ssibgs-2"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-36ssibgs-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-36ssibgs-2"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-36ssibgs-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-36ssibgs-2"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-36ssibgs-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }</style><style>[data-astro-transition-scope="astro-36ssibgs-3"] { view-transition-name: python; }@layer astro { ::view-transition-old(python) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }::view-transition-new(python) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back]::view-transition-old(python) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back]::view-transition-new(python) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-36ssibgs-3"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-36ssibgs-3"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-36ssibgs-3"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-36ssibgs-3"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-36ssibgs-3"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-36ssibgs-3"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-36ssibgs-3"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-36ssibgs-3"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }</style><style>[data-astro-transition-scope="astro-36ssibgs-4"] { view-transition-name: requests; }@layer astro { ::view-transition-old(requests) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }::view-transition-new(requests) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back]::view-transition-old(requests) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back]::view-transition-new(requests) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-36ssibgs-4"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-36ssibgs-4"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-36ssibgs-4"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-36ssibgs-4"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-36ssibgs-4"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-36ssibgs-4"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-36ssibgs-4"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-36ssibgs-4"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }</style><style>[data-astro-transition-scope="astro-36ssibgs-5"] { view-transition-name: statistics; }@layer astro { ::view-transition-old(statistics) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }::view-transition-new(statistics) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back]::view-transition-old(statistics) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back]::view-transition-new(statistics) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-36ssibgs-5"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-36ssibgs-5"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-36ssibgs-5"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-36ssibgs-5"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-36ssibgs-5"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-36ssibgs-5"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-36ssibgs-5"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-36ssibgs-5"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }</style></head> <body>  <header class="astro-3ef6ksr2"> <a id="skip-to-content" href="#main-content" class="astro-3ef6ksr2">Skip to content</a> <div class="nav-container astro-3ef6ksr2"> <div class="top-nav-wrap astro-3ef6ksr2"> <a href="/" class="logo whitespace-nowrap astro-3ef6ksr2"> Tim Watson&#39;s Blog </a> <nav id="nav-menu" class="astro-3ef6ksr2"> <button class="hamburger-menu focus-outline astro-3ef6ksr2" aria-label="Open Menu" aria-expanded="false" aria-controls="menu-items"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="menu-icon astro-3ef6ksr2"> <line x1="7" y1="12" x2="21" y2="12" class="line astro-3ef6ksr2"></line> <line x1="3" y1="6" x2="21" y2="6" class="line astro-3ef6ksr2"></line> <line x1="12" y1="18" x2="21" y2="18" class="line astro-3ef6ksr2"></line> <line x1="18" y1="6" x2="6" y2="18" class="close astro-3ef6ksr2"></line> <line x1="6" y1="6" x2="18" y2="18" class="close astro-3ef6ksr2"></line> </svg> </button> <ul id="menu-items" class="display-none sm:flex astro-3ef6ksr2"> <li class="astro-3ef6ksr2"> <a href="/about" class=" astro-3ef6ksr2">
About
</a> </li> <li class="astro-3ef6ksr2"> <a href="/posts" class=" astro-3ef6ksr2">
Posts
</a> </li> <li class="astro-3ef6ksr2"> <a href="/tags" class=" astro-3ef6ksr2">
Tags
</a> </li> <li class="astro-3ef6ksr2"> <a href="/search" class="group inline-block hover:text-skin-accent focus-outline p-3 sm:p-1 flex astro-3ef6ksr2" aria-label="search" title="Search"> <svg xmlns="http://www.w3.org/2000/svg" class="scale-125 sm:scale-100 astro-3ef6ksr2"><path d="M19.023 16.977a35.13 35.13 0 0 1-1.367-1.384c-.372-.378-.596-.653-.596-.653l-2.8-1.337A6.962 6.962 0 0 0 16 9c0-3.859-3.14-7-7-7S2 5.141 2 9s3.14 7 7 7c1.763 0 3.37-.66 4.603-1.739l1.337 2.8s.275.224.653.596c.387.363.896.854 1.384 1.367l1.358 1.392.604.646 2.121-2.121-.646-.604c-.379-.372-.885-.866-1.391-1.36zM9 14c-2.757 0-5-2.243-5-5s2.243-5 5-5 5 2.243 5 5-2.243 5-5 5z" class="astro-3ef6ksr2"></path> </svg> <span class="sr-only astro-3ef6ksr2">Search</span> </a> </li> <li class="astro-3ef6ksr2"> <button id="theme-btn" class="focus-outline astro-3ef6ksr2" title="Toggles light & dark" aria-label="auto" aria-live="polite"> <svg xmlns="http://www.w3.org/2000/svg" id="moon-svg" class="astro-3ef6ksr2"> <path d="M20.742 13.045a8.088 8.088 0 0 1-2.077.271c-2.135 0-4.14-.83-5.646-2.336a8.025 8.025 0 0 1-2.064-7.723A1 1 0 0 0 9.73 2.034a10.014 10.014 0 0 0-4.489 2.582c-3.898 3.898-3.898 10.243 0 14.143a9.937 9.937 0 0 0 7.072 2.93 9.93 9.93 0 0 0 7.07-2.929 10.007 10.007 0 0 0 2.583-4.491 1.001 1.001 0 0 0-1.224-1.224zm-2.772 4.301a7.947 7.947 0 0 1-5.656 2.343 7.953 7.953 0 0 1-5.658-2.344c-3.118-3.119-3.118-8.195 0-11.314a7.923 7.923 0 0 1 2.06-1.483 10.027 10.027 0 0 0 2.89 7.848 9.972 9.972 0 0 0 7.848 2.891 8.036 8.036 0 0 1-1.484 2.059z" class="astro-3ef6ksr2"></path> </svg> <svg xmlns="http://www.w3.org/2000/svg" id="sun-svg" class="astro-3ef6ksr2"> <path d="M6.993 12c0 2.761 2.246 5.007 5.007 5.007s5.007-2.246 5.007-5.007S14.761 6.993 12 6.993 6.993 9.239 6.993 12zM12 8.993c1.658 0 3.007 1.349 3.007 3.007S13.658 15.007 12 15.007 8.993 13.658 8.993 12 10.342 8.993 12 8.993zM10.998 19h2v3h-2zm0-17h2v3h-2zm-9 9h3v2h-3zm17 0h3v2h-3zM4.219 18.363l2.12-2.122 1.415 1.414-2.12 2.122zM16.24 6.344l2.122-2.122 1.414 1.414-2.122 2.122zM6.342 7.759 4.22 5.637l1.415-1.414 2.12 2.122zm13.434 10.605-1.414 1.414-2.122-2.122 1.414-1.414z" class="astro-3ef6ksr2"></path> </svg> </button> </li> </ul> </nav> </div> </div> <div class="max-w-7xl mx-auto px-4"> <hr class="border-skin-line" aria-hidden="true"> </div> </header>   <div class="mx-auto flex w-full max-w-7xl justify-start px-2 astro-vj4tpspi"> <button class="focus-outline mb-2 mt-8 flex hover:opacity-75 astro-vj4tpspi" onclick="(() => (history.length === 1) ? window.location = '/' : history.back())()"> <svg xmlns="http://www.w3.org/2000/svg" class="astro-vj4tpspi"><path d="M13.293 6.293 7.586 12l5.707 5.707 1.414-1.414L10.414 12l4.293-4.293z" class="astro-vj4tpspi"></path> </svg><span class="astro-vj4tpspi">Go back</span> </button> </div> <main id="main-content" class="astro-vj4tpspi"> <h1 class="post-title astro-vj4tpspi" data-astro-transition-scope="astro-plk3gbjq-1">Predicting the Lottery</h1> <div class="flex items-center space-x-2 opacity-80 my-2 astro-vj4tpspi"><svg xmlns="http://www.w3.org/2000/svg" class="scale-100 inline-block h-6 w-6 min-w-[1.375rem] fill-skin-base" aria-hidden="true"><path d="M7 11h2v2H7zm0 4h2v2H7zm4-4h2v2h-2zm0 4h2v2h-2zm4-4h2v2h-2zm0 4h2v2h-2z"></path><path d="M5 22h14c1.103 0 2-.897 2-2V6c0-1.103-.897-2-2-2h-2V2h-2v2H9V2H7v2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2zM19 8l.001 12H5V8h14z"></path></svg><span class="sr-only">Published:</span><span class="italic text-base"><time dateTime="2022-02-06T20:00:35.000Z">Feb 6, 2022</time><span aria-hidden="true"> | </span><span class="sr-only"> at </span><span class="text-nowrap">08:00 PM</span></span></div> <article id="article" role="article" class="prose mx-auto mt-8 max-w-7xl astro-vj4tpspi"> <h2 id="table-of-contents">Table of contents</h2>
<p></p><details><summary>Open Table of contents</summary><p></p>
<ul>
<li><a href="#beginning">Beginning</a></li>
<li><a href="#getting-the-previous-draws">Getting the Previous draws.</a></li>
<li><a href="#getting-all-the-draws-">Getting ALL the draws …</a></li>
</ul>
<p></p></details><p></p>
<h1 id="beginning">Beginning</h1>
<p>For a long time I had day-dreamed with the idea of trying to come up with a way of picking my numbers for the lottery. I don’t really play but from time to time when the prize money hits the headlines, I sometimes drop by a shop and get a <code>lucky dip</code>. The problem is, the random numbers that get given to you are normally suspect… but when you really think about it. Probably quite random.</p>
<p>So is there a way to look at previous draws, slim down the numbers to choose from and then maybe have a better chance of winning ?</p>
<p>Short answer, obviously, no. But it seems like a fun challenge to play with and ultimately if I can create a program that can simulate drawing numbers it might really prove how unlikely it is to win the jackpot.</p>
<h1 id="getting-the-previous-draws">Getting the Previous draws.</h1>
<p>The first step is obviously to get (all) the previous draws and then to operate on some or all of those to produce a <em>optimal</em> pick. Ideally there would be an api that we could query that would expose all the results we need.
<img src="/images/lottery/api.png" alt="Fast API for euromillions" title="Fast API for the EuroMillions" width="768">
Unforunately the offical website doesn’t have an API and the only one I can find is a paid for service (to get the data I want). That means to get the data I need, I will need to scrape it from websites and colate it. Luckily there are lots of sites with this data, so it is instead a challenge of getting the data extracted.
<img src="/images/lottery/lottery_results_1.png" alt="Screenshot of lottery.co.uk" title="Screenshot of lottery.co.uk" width="768"></p>
<p>This should be relatively easy to do with <code>requests</code> and <code>BeatifulSoup</code></p>
<pre class="astro-code one-dark-pro" style="background-color:#282c34;color:#abb2bf; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF">resp </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> requests.</span><span style="color:#61AFEF">get</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"https://www.lottery.co.uk/euromillions/results/archive-2023"</span><span style="color:#ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF">soup </span><span style="color:#56B6C2">=</span><span style="color:#61AFEF"> BeautifulSoup</span><span style="color:#ABB2BF">(resp.content, </span><span style="color:#98C379">'html.parser'</span><span style="color:#ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF">res </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> soup.</span><span style="color:#61AFEF">find_all</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"tr"</span><span style="color:#ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">for</span><span style="color:#ABB2BF"> result </span><span style="color:#C678DD">in</span><span style="color:#56B6C2"> range</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">1</span><span style="color:#ABB2BF">,</span><span style="color:#56B6C2">len</span><span style="color:#ABB2BF">(res)):</span></span>
<span class="line"><span style="color:#ABB2BF">    out </span><span style="color:#56B6C2">=</span><span style="color:#61AFEF"> Lottery_Draw</span><span style="color:#ABB2BF">(res[result].</span><span style="color:#56B6C2">__str__</span><span style="color:#ABB2BF">())</span></span>
<span class="line"><span style="color:#56B6C2">    print</span><span style="color:#ABB2BF">(out)</span></span>
<span class="line"><span style="color:#56B6C2">    print</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"---"</span><span style="color:#ABB2BF">)</span></span></code></pre>
<p>Here is a first draft of my <code>query_results.py</code> file which gets the results for 2023 and then sends them to my parings class and prints each one out.</p>
<pre class="astro-code one-dark-pro" style="background-color:#282c34;color:#abb2bf; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF">regex </span><span style="color:#56B6C2">=</span><span style="color:#C678DD"> r</span><span style="color:#E06C75">"</span><span style="color:#D19A66">[A-Z]{4}[0-9]{5}</span><span style="color:#E06C75">"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">class</span><span style="color:#E5C07B"> DateError</span><span style="color:#ABB2BF">(Exception):</span></span>
<span class="line"><span style="color:#C678DD">    def</span><span style="color:#56B6C2"> __init__</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B;font-style:italic">self</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66;font-style:italic">message</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"Lottery date is not valid"</span><span style="color:#ABB2BF">):</span></span>
<span class="line"><span style="color:#E5C07B">        self</span><span style="color:#ABB2BF">.message </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> message</span></span>
<span class="line"><span style="color:#56B6C2">        super</span><span style="color:#ABB2BF">().</span><span style="color:#56B6C2">__init__</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.message)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">class</span><span style="color:#E5C07B"> MillionaireMakerError</span><span style="color:#ABB2BF">(Exception):</span></span>
<span class="line"><span style="color:#C678DD">    def</span><span style="color:#56B6C2"> __init__</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B;font-style:italic">self</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66;font-style:italic">message</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"Millionaire Maker code is not valid"</span><span style="color:#ABB2BF">):</span></span>
<span class="line"><span style="color:#E5C07B">        self</span><span style="color:#ABB2BF">.message </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> message</span></span>
<span class="line"><span style="color:#56B6C2">        super</span><span style="color:#ABB2BF">().</span><span style="color:#56B6C2">__init__</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.message)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">class</span><span style="color:#E5C07B"> Lottery_Draw</span><span style="color:#ABB2BF">():</span></span>
<span class="line"><span style="color:#C678DD">    def</span><span style="color:#56B6C2"> __init__</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B;font-style:italic">self</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66;font-style:italic">html</span><span style="color:#ABB2BF">: </span><span style="color:#56B6C2">bytes</span><span style="color:#ABB2BF">):</span></span>
<span class="line"><span style="color:#E5C07B">        self</span><span style="color:#ABB2BF">.balls </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> []</span></span>
<span class="line"><span style="color:#E5C07B">        self</span><span style="color:#ABB2BF">.stars </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> []</span></span>
<span class="line"><span style="color:#E5C07B">        self</span><span style="color:#ABB2BF">.date </span><span style="color:#56B6C2">=</span><span style="color:#D19A66"> None</span></span>
<span class="line"><span style="color:#E5C07B">        self</span><span style="color:#ABB2BF">.millionaire_maker </span><span style="color:#56B6C2">=</span><span style="color:#D19A66"> None</span></span>
<span class="line"><span style="color:#E5C07B">        self</span><span style="color:#ABB2BF">.jackpot </span><span style="color:#56B6C2">=</span><span style="color:#D19A66"> 0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF">        soup </span><span style="color:#56B6C2">=</span><span style="color:#61AFEF"> BeautifulSoup</span><span style="color:#ABB2BF">(html, </span><span style="color:#98C379">'html.parser'</span><span style="color:#ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic">        # Set the date(datetime object)</span></span>
<span class="line"><span style="color:#ABB2BF">        res </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> soup.</span><span style="color:#61AFEF">find_all</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"a"</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75;font-style:italic">class_</span><span style="color:#56B6C2">=</span><span style="color:#98C379">"smallerHeading nowrap"</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#C678DD">        try</span><span style="color:#ABB2BF">:</span></span>
<span class="line"><span style="color:#E5C07B">            self</span><span style="color:#ABB2BF">.date </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> dateutil.parser.</span><span style="color:#61AFEF">parse</span><span style="color:#ABB2BF">(res[</span><span style="color:#D19A66">0</span><span style="color:#ABB2BF">].text)</span></span>
<span class="line"><span style="color:#C678DD">        except</span><span style="color:#ABB2BF"> Exception:</span></span>
<span class="line"><span style="color:#C678DD">            raise</span><span style="color:#61AFEF"> DateError</span><span style="color:#ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic">        # Get all the normal balls for this draw</span></span>
<span class="line"><span style="color:#ABB2BF">        res </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> soup.</span><span style="color:#61AFEF">find_all</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"div"</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75;font-style:italic">class_</span><span style="color:#56B6C2">=</span><span style="color:#98C379">"result small euromillions-ball"</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#C678DD">        for</span><span style="color:#ABB2BF"> result </span><span style="color:#C678DD">in</span><span style="color:#ABB2BF"> res:</span></span>
<span class="line"><span style="color:#E5C07B">            self</span><span style="color:#ABB2BF">.balls.</span><span style="color:#61AFEF">append</span><span style="color:#ABB2BF">(</span><span style="color:#56B6C2">int</span><span style="color:#ABB2BF">(result.text))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic">        # Get all the `special` balls for this draw</span></span>
<span class="line"><span style="color:#ABB2BF">        res </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> soup.</span><span style="color:#61AFEF">find_all</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"div"</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75;font-style:italic">class_</span><span style="color:#56B6C2">=</span><span style="color:#98C379">"result small euromillions-lucky-star"</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#C678DD">        for</span><span style="color:#ABB2BF"> result </span><span style="color:#C678DD">in</span><span style="color:#ABB2BF"> res:</span></span>
<span class="line"><span style="color:#E5C07B">            self</span><span style="color:#ABB2BF">.stars.</span><span style="color:#61AFEF">append</span><span style="color:#ABB2BF">(</span><span style="color:#56B6C2">int</span><span style="color:#ABB2BF">(result.text))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF">        res </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> soup.</span><span style="color:#61AFEF">find_all</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"td"</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75;font-style:italic">style</span><span style="color:#56B6C2">=</span><span style="color:#98C379">"text-align: center !important; white-space: nowrap;"</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic">        # If this has found the balls, remove them</span></span>
<span class="line"><span style="color:#ABB2BF">        res </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> [item </span><span style="color:#C678DD">for</span><span style="color:#ABB2BF"> item </span><span style="color:#C678DD">in</span><span style="color:#ABB2BF"> res </span><span style="color:#C678DD">if</span><span style="color:#98C379"> "euro"</span><span style="color:#C678DD"> not</span><span style="color:#C678DD"> in</span><span style="color:#56B6C2"> str</span><span style="color:#ABB2BF">(item)]</span></span>
<span class="line"><span style="color:#E5C07B">        self</span><span style="color:#ABB2BF">.millionaire_maker </span><span style="color:#56B6C2">=</span><span style="color:#56B6C2"> str</span><span style="color:#ABB2BF">(res[</span><span style="color:#D19A66">0</span><span style="color:#ABB2BF">].text).</span><span style="color:#61AFEF">strip</span><span style="color:#ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">        if</span><span style="color:#98C379"> "Millionaire Maker Codes"</span><span style="color:#C678DD"> in</span><span style="color:#E5C07B"> self</span><span style="color:#ABB2BF">.millionaire_maker:</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic">            # Sometimes there are more than one code and it isn't listed</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic">            # Don't worry ...</span></span>
<span class="line"><span style="color:#C678DD">            pass</span></span>
<span class="line"><span style="color:#C678DD">        else</span><span style="color:#ABB2BF">:</span></span>
<span class="line"><span style="color:#ABB2BF">            match </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> re.</span><span style="color:#61AFEF">findall</span><span style="color:#ABB2BF">(regex, </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.millionaire_maker)</span></span>
<span class="line"><span style="color:#C678DD">            if</span><span style="color:#56B6C2"> len</span><span style="color:#ABB2BF">(match) </span><span style="color:#56B6C2">&#x3C;</span><span style="color:#D19A66"> 1</span><span style="color:#ABB2BF">:</span></span>
<span class="line"><span style="color:#C678DD">                raise</span><span style="color:#61AFEF"> MillionaireMakerError</span><span style="color:#ABB2BF">(</span><span style="color:#C678DD">f</span><span style="color:#98C379">"Millionaire Make code is not valid: </span><span style="color:#D19A66">{</span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.millionaire_maker</span><span style="color:#D19A66">}</span><span style="color:#98C379">"</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic">        # Take the value for the jackpot, remove £ and then remove the commas and convert to an int</span></span>
<span class="line"><span style="color:#E5C07B">        self</span><span style="color:#ABB2BF">.jackpot </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> res[</span><span style="color:#D19A66">1</span><span style="color:#ABB2BF">].text</span></span>
<span class="line"><span style="color:#E5C07B">        self</span><span style="color:#ABB2BF">.jackpot </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> [jackpot </span><span style="color:#C678DD">for</span><span style="color:#ABB2BF"> jackpot </span><span style="color:#C678DD">in</span><span style="color:#56B6C2"> str</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.jackpot).</span><span style="color:#61AFEF">split</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"</span><span style="color:#56B6C2">\n</span><span style="color:#98C379">"</span><span style="color:#ABB2BF">) </span><span style="color:#C678DD">if</span><span style="color:#98C379"> "£"</span><span style="color:#C678DD"> in</span><span style="color:#ABB2BF"> jackpot]</span></span>
<span class="line"><span style="color:#E5C07B">        self</span><span style="color:#ABB2BF">.jackpot </span><span style="color:#56B6C2">=</span><span style="color:#E5C07B"> self</span><span style="color:#ABB2BF">.jackpot[</span><span style="color:#D19A66">0</span><span style="color:#ABB2BF">].</span><span style="color:#61AFEF">replace</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">","</span><span style="color:#ABB2BF">, </span><span style="color:#98C379">""</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#E5C07B">        self</span><span style="color:#ABB2BF">.jackpot </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> (</span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.jackpot[</span><span style="color:#D19A66">1</span><span style="color:#ABB2BF">:])</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">    def</span><span style="color:#56B6C2"> __str__</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B;font-style:italic">self</span><span style="color:#ABB2BF">):</span></span>
<span class="line"><span style="color:#C678DD">        return</span><span style="color:#C678DD"> f</span><span style="color:#98C379">"Date: </span><span style="color:#D19A66">{</span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.date.</span><span style="color:#61AFEF">date</span><span style="color:#ABB2BF">()</span><span style="color:#D19A66">}</span><span style="color:#56B6C2">\n</span><span style="color:#98C379">balls: </span><span style="color:#D19A66">{</span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.balls</span><span style="color:#D19A66">}</span><span style="color:#56B6C2">\n</span><span style="color:#98C379">stars: </span><span style="color:#D19A66">{</span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.stars</span><span style="color:#D19A66">}</span><span style="color:#56B6C2">\n</span><span style="color:#98C379">millionaire maker: </span><span style="color:#D19A66">{</span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.millionaire_maker</span><span style="color:#D19A66">}</span><span style="color:#56B6C2">\n</span><span style="color:#98C379">jackpot: </span><span style="color:#D19A66">{</span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.jackpot</span><span style="color:#D19A66">}</span><span style="color:#98C379">"</span></span></code></pre>
<p>From these two files I get results that look like:</p>
<pre class="astro-code one-dark-pro" style="background-color:#282c34;color:#abb2bf; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#56B6C2">Date</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">2023-08-11</span></span>
<span class="line"><span style="color:#ABB2BF">balls: [</span><span style="color:#D19A66">4</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">6</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">10</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">13</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">34</span><span style="color:#ABB2BF">]</span></span>
<span class="line"><span style="color:#ABB2BF">stars: [</span><span style="color:#D19A66">3</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">5</span><span style="color:#ABB2BF">]</span></span>
<span class="line"><span style="color:#ABB2BF">millionaire maker: HWKW86229</span></span>
<span class="line"><span style="color:#ABB2BF">jackpot: </span><span style="color:#D19A66">33701388</span></span>
<span class="line"><span style="color:#ABB2BF">---</span></span>
<span class="line"><span style="color:#56B6C2">Date</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">2023-08-08</span></span>
<span class="line"><span style="color:#ABB2BF">balls: [</span><span style="color:#D19A66">8</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">9</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">33</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">35</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">40</span><span style="color:#ABB2BF">]</span></span>
<span class="line"><span style="color:#ABB2BF">stars: [</span><span style="color:#D19A66">3</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">6</span><span style="color:#ABB2BF">]</span></span>
<span class="line"><span style="color:#ABB2BF">millionaire maker: JWKT59141</span></span>
<span class="line"><span style="color:#ABB2BF">jackpot: </span><span style="color:#D19A66">22733867</span></span>
<span class="line"><span style="color:#ABB2BF">---</span></span></code></pre>
<h1 id="getting-all-the-draws">Getting ALL the draws …</h1>
<p>Now the only thing that is left is to extend the code to iterate over all the draws in the “archive” and get all that are stored. There are URL’s <code>https://www.lottery.co.uk/euromillions/results/archive-</code> that end with a year such that it should be relatively easy to append the year we need to query:</p>
<pre class="astro-code one-dark-pro" style="background-color:#282c34;color:#abb2bf; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF">current_year </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> datetime.datetime.</span><span style="color:#61AFEF">today</span><span style="color:#ABB2BF">().year</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic"># Construct all the archive urls from 2010 - the current year</span></span>
<span class="line"><span style="color:#ABB2BF">urls </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> [</span><span style="color:#D19A66">URL</span><span style="color:#56B6C2">+str</span><span style="color:#ABB2BF">(i) </span><span style="color:#C678DD">for</span><span style="color:#ABB2BF"> i </span><span style="color:#C678DD">in</span><span style="color:#56B6C2"> range</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">2010</span><span style="color:#ABB2BF">, current_year</span><span style="color:#56B6C2">+</span><span style="color:#D19A66">1</span><span style="color:#ABB2BF">)]</span></span></code></pre>
<p>Then running the code:</p>
<pre class="astro-code one-dark-pro" style="background-color:#282c34;color:#abb2bf; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#C678DD">for</span><span style="color:#ABB2BF"> url </span><span style="color:#C678DD">in</span><span style="color:#ABB2BF"> urls:</span></span>
<span class="line"><span style="color:#56B6C2">    print</span><span style="color:#ABB2BF">(</span><span style="color:#C678DD">f</span><span style="color:#98C379">"Querying </span><span style="color:#D19A66">{</span><span style="color:#ABB2BF">url</span><span style="color:#D19A66">}</span><span style="color:#98C379">"</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF">    resp </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> requests.</span><span style="color:#61AFEF">get</span><span style="color:#ABB2BF">(url)</span></span>
<span class="line"><span style="color:#ABB2BF">    soup </span><span style="color:#56B6C2">=</span><span style="color:#61AFEF"> BeautifulSoup</span><span style="color:#ABB2BF">(resp.content, </span><span style="color:#98C379">'html.parser'</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF">    res </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> soup.</span><span style="color:#61AFEF">find_all</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"tr"</span><span style="color:#ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF">    results </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> [</span><span style="color:#61AFEF">Lottery_Draw</span><span style="color:#ABB2BF">(line.</span><span style="color:#56B6C2">__str__</span><span style="color:#ABB2BF">()) </span><span style="color:#C678DD">for</span><span style="color:#ABB2BF"> line </span><span style="color:#C678DD">in</span><span style="color:#ABB2BF"> res[</span><span style="color:#D19A66">1</span><span style="color:#ABB2BF">:]]</span></span>
<span class="line"><span style="color:#E5C07B">    self</span><span style="color:#ABB2BF">.lottery_entries.</span><span style="color:#61AFEF">extend</span><span style="color:#ABB2BF">(results)</span></span></code></pre>
<p>Allows us to populate(extend) the list of lottery results stored in the lottery handler class. One note here is that the Euromillions has evolved since its inception and so there are draws from before 2010, (up to 2004) but the layout of the website changes and although it is fixable, going to the <a href="https://www.lottery.co.uk/euromillions/statistics">stats</a> page shows how the euromillions has actually changed over time and it may well be worth (statistically speaking) limiting what numbers are compared against each other anyway.</p>
<img src="/images/lottery/lottery_stats.png" alt="Screenshot of the stats page from lottery.co.uk" title="Screenshot of the stats page from lottery.co.uk" width="500">
<p>With that caveat and a little bit more error handling in the <code>Lottery_Draw</code> class we can then save our list of <code>Lottery Draw</code>’s. To do this I have created a <code>Save</code> method. Much like the <code>save_entry</code> method, it saves to file, but this one writes all of the rows at once and also sorts them, incase they aren’t sorted.</p>
<pre class="astro-code one-dark-pro" style="background-color:#282c34;color:#abb2bf; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#C678DD">def</span><span style="color:#61AFEF"> save</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B;font-style:italic">self</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66;font-style:italic">file</span><span style="color:#ABB2BF">: </span><span style="color:#56B6C2">str=</span><span style="color:#98C379">"lottery_store.csv"</span><span style="color:#ABB2BF">) -> </span><span style="color:#D19A66">None</span><span style="color:#ABB2BF">:</span></span>
<span class="line"><span style="color:#98C379">    """</span></span>
<span class="line"><span style="color:#98C379">    Save the current lottery entries to file, after we have sorted them to make the most recent at the top</span></span>
<span class="line"><span style="color:#98C379">    """</span></span>
<span class="line"><span style="color:#ABB2BF">    sort </span><span style="color:#56B6C2">=</span><span style="color:#56B6C2"> sorted</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.lottery_entries, </span><span style="color:#E06C75;font-style:italic">key</span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF">operator.</span><span style="color:#61AFEF">attrgetter</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">'date'</span><span style="color:#ABB2BF">), </span><span style="color:#E06C75;font-style:italic">reverse</span><span style="color:#56B6C2">=</span><span style="color:#D19A66">True</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF">    rows </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> [[row.balls, row.stars, row.date, row.millionaire_maker, row.jackpot] </span><span style="color:#C678DD">for</span><span style="color:#ABB2BF"> row </span><span style="color:#C678DD">in</span><span style="color:#ABB2BF"> sort]</span></span>
<span class="line"><span style="color:#C678DD">    with</span><span style="color:#56B6C2"> open</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">file</span><span style="color:#ABB2BF">, </span><span style="color:#98C379">"w"</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75;font-style:italic">newline</span><span style="color:#56B6C2">=</span><span style="color:#98C379">""</span><span style="color:#ABB2BF">) </span><span style="color:#C678DD">as</span><span style="color:#ABB2BF"> lottery_csv:</span></span>
<span class="line"><span style="color:#ABB2BF">        writer </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> csv.</span><span style="color:#61AFEF">writer</span><span style="color:#ABB2BF">(lottery_csv)</span></span>
<span class="line"><span style="color:#ABB2BF">        writer.</span><span style="color:#61AFEF">writerows</span><span style="color:#ABB2BF">(rows)</span></span></code></pre>
<p>Now that leaves us with a csv file with entries we can load for each draw and we can update. So we are now at the stage where we need to <em>actually</em> do some data manipulation …</p> </article> <ul class="my-8 astro-vj4tpspi"> <li class="inline-block my-1 underline-offset-4 astro-blwjyjpt"> <a href="/tags/lottery" class="text-sm pr-2 group astro-blwjyjpt" data-astro-transition-scope="astro-36ssibgs-2"> <svg xmlns="http://www.w3.org/2000/svg" class=" scale-75 astro-blwjyjpt"><path d="M16.018 3.815 15.232 8h-4.966l.716-3.815-1.964-.37L8.232 8H4v2h3.857l-.751 4H3v2h3.731l-.714 3.805 1.965.369L8.766 16h4.966l-.714 3.805 1.965.369.783-4.174H20v-2h-3.859l.751-4H21V8h-3.733l.716-3.815-1.965-.37zM14.106 14H9.141l.751-4h4.966l-.752 4z" class="astro-blwjyjpt"></path> </svg>
&nbsp;<span class="astro-blwjyjpt">lottery</span> </a> </li> <li class="inline-block my-1 underline-offset-4 astro-blwjyjpt"> <a href="/tags/python" class="text-sm pr-2 group astro-blwjyjpt" data-astro-transition-scope="astro-36ssibgs-3"> <svg xmlns="http://www.w3.org/2000/svg" class=" scale-75 astro-blwjyjpt"><path d="M16.018 3.815 15.232 8h-4.966l.716-3.815-1.964-.37L8.232 8H4v2h3.857l-.751 4H3v2h3.731l-.714 3.805 1.965.369L8.766 16h4.966l-.714 3.805 1.965.369.783-4.174H20v-2h-3.859l.751-4H21V8h-3.733l.716-3.815-1.965-.37zM14.106 14H9.141l.751-4h4.966l-.752 4z" class="astro-blwjyjpt"></path> </svg>
&nbsp;<span class="astro-blwjyjpt">python</span> </a> </li> <li class="inline-block my-1 underline-offset-4 astro-blwjyjpt"> <a href="/tags/requests" class="text-sm pr-2 group astro-blwjyjpt" data-astro-transition-scope="astro-36ssibgs-4"> <svg xmlns="http://www.w3.org/2000/svg" class=" scale-75 astro-blwjyjpt"><path d="M16.018 3.815 15.232 8h-4.966l.716-3.815-1.964-.37L8.232 8H4v2h3.857l-.751 4H3v2h3.731l-.714 3.805 1.965.369L8.766 16h4.966l-.714 3.805 1.965.369.783-4.174H20v-2h-3.859l.751-4H21V8h-3.733l.716-3.815-1.965-.37zM14.106 14H9.141l.751-4h4.966l-.752 4z" class="astro-blwjyjpt"></path> </svg>
&nbsp;<span class="astro-blwjyjpt">requests</span> </a> </li> <li class="inline-block my-1 underline-offset-4 astro-blwjyjpt"> <a href="/tags/statistics" class="text-sm pr-2 group astro-blwjyjpt" data-astro-transition-scope="astro-36ssibgs-5"> <svg xmlns="http://www.w3.org/2000/svg" class=" scale-75 astro-blwjyjpt"><path d="M16.018 3.815 15.232 8h-4.966l.716-3.815-1.964-.37L8.232 8H4v2h3.857l-.751 4H3v2h3.731l-.714 3.805 1.965.369L8.766 16h4.966l-.714 3.805 1.965.369.783-4.174H20v-2h-3.859l.751-4H21V8h-3.733l.716-3.815-1.965-.37zM14.106 14H9.141l.751-4h4.966l-.752 4z" class="astro-blwjyjpt"></path> </svg>
&nbsp;<span class="astro-blwjyjpt">statistics</span> </a> </li>  </ul> <div class="flex flex-col-reverse items-center justify-between gap-6 sm:flex-row-reverse sm:items-end sm:gap-4 astro-vj4tpspi"> <div class="flex justify-end astro-vj4tpspi"> <button id="back-to-top" class="focus-outline whitespace-nowrap py-1 hover:opacity-75 astro-vj4tpspi"> <svg xmlns="http://www.w3.org/2000/svg" class="rotate-90 astro-vj4tpspi"> <path d="M13.293 6.293 7.586 12l5.707 5.707 1.414-1.414L10.414 12l4.293-4.293z" class="astro-vj4tpspi"></path> </svg> <span class="astro-vj4tpspi">Back to Top</span> </button> <!--<ShareLinks />--> </div> </div></main> <footer class="mt-auto astro-sz7xmlte"> <div class="max-w-7xl mx-auto px-0"> <hr class="border-skin-line" aria-hidden="true"> </div> <div class="footer-wrapper astro-sz7xmlte"> <div class="social-icons flex astro-upu6fzxr"> <a href="https://github.com/timrwwatson" class="group inline-block hover:text-skin-accent link-button astro-upu6fzxr" title=" Tim Watson on Github"> <svg
    xmlns="http://www.w3.org/2000/svg"
    class="icon-tabler"
    stroke-linecap="round"
    stroke-linejoin="round"
  >
    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
    <path
      d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5"
    ></path>
  </svg> <span class="sr-only astro-upu6fzxr"> Tim Watson on Github</span> </a><a href="https://www.linkedin.com/in/timothy-r-w-watson/" class="group inline-block hover:text-skin-accent link-button astro-upu6fzxr" title="Tim Watson on LinkedIn"> <svg
    xmlns="http://www.w3.org/2000/svg"
    class="icon-tabler"
    stroke-linecap="round"
    stroke-linejoin="round"
  >
    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
    <rect x="4" y="4" width="16" height="16" rx="2"></rect>
    <line x1="8" y1="11" x2="8" y2="16"></line>
    <line x1="8" y1="8" x2="8" y2="8.01"></line>
    <line x1="12" y1="16" x2="12" y2="11"></line>
    <path d="M16 16v-3a2 2 0 0 0 -4 0"></path>
  </svg> <span class="sr-only astro-upu6fzxr">Tim Watson on LinkedIn</span> </a><a href="mailto:contact@tim-watson.com" class="group inline-block hover:text-skin-accent link-button astro-upu6fzxr" title="Send an email to Tim Watson"> <svg
      xmlns="http://www.w3.org/2000/svg"
      class="icon-tabler"
      stroke-linecap="round"
      stroke-linejoin="round"
    >
      <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
      <rect x="3" y="5" width="18" height="14" rx="2"></rect>
      <polyline points="3 7 12 13 21 7"></polyline>
    </svg> <span class="sr-only astro-upu6fzxr">Send an email to Tim Watson</span> </a> </div>  <div class="copyright-wrapper astro-sz7xmlte"> <span class="astro-sz7xmlte">Copyright &#169; 2024</span> <span class="separator astro-sz7xmlte">&nbsp;|&nbsp;</span> <span class="astro-sz7xmlte">All rights reserved.</span> </div> </div> </footer>   </body></html>  <script>
  /** Attaches links to headings in the document,
   *  allowing sharing of sections easily */
   function addHeadingLinks() {
    let headings = Array.from(document.querySelectorAll("h2, h3, h4, h5, h6"));
    for (let heading of headings) {
      heading.classList.add("group");
      let link = document.createElement("a");
      link.innerText = "#";
      link.className = "heading-link hidden group-hover:inline-block ml-2";
      link.href = "#" + heading.id;
      link.ariaHidden = "true";
      heading.appendChild(link);
    }
  }
  addHeadingLinks();
   /** Attaches copy buttons to code blocks in the document,
   * allowing users to copy code easily. */
   function attachCopyButtons() {
    let copyButtonLabel = "Copy";
    let codeBlocks = Array.from(document.querySelectorAll("pre"));

    for (let codeBlock of codeBlocks) {
      let wrapper = document.createElement("div");
      wrapper.style.position = "relative";

      let copyButton = document.createElement("button");
      copyButton.className =
        "copy-code absolute right-3 top-1 rounded bg-skin-card px-2 py-1 text-xs leading-4 text-skin-base font-medium";
      copyButton.innerHTML = copyButtonLabel;
      codeBlock.setAttribute("tabindex", "0");
      codeBlock.appendChild(copyButton);

      // wrap codebock with relative parent element
      codeBlock?.parentNode?.insertBefore(wrapper, codeBlock);
      wrapper.appendChild(codeBlock);

      copyButton.addEventListener("click", async () => {
        await copyCode(codeBlock, copyButton);
      });
    }

    async function copyCode(block, button) {
      let code = block.querySelector("code");
      let text = code?.innerText;

      await navigator.clipboard.writeText(text ?? "");

      // visual feedback that task is completed
      button.innerText = "Copied";

      setTimeout(() => {
        button.innerText = copyButtonLabel;
      }, 700);
    }
  }
  attachCopyButtons();


  /** Scrolls the document to the top when
   * the "Back to Top" button is clicked. */
  function backToTop() {
    document.querySelector("#back-to-top")?.addEventListener("click", () => {
      document.body.scrollTop = 0; // For Safari
      document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
    });
  }
  backToTop();
  
</script>